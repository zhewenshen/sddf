/* Preprocessor to get around Mac OS, Windows, and Linux differences in naming and calling conventions */

#if defined(__APPLE__)
# define cdecl(s) _##s
#else
# define cdecl(s) s
#endif

#if defined(__APPLE__)
# define wcdecl(s) _##s
#elif defined(__WIN32)
# define wcdecl(s) windows_##s
#else
# define wcdecl(s) s
#endif

#if defined(__APPLE__)
# define wcml(s) s
#elif defined(__WIN32)
# define wcml(s) windows_##s
#else
# define wcml(s) s
#endif

#if defined(__APPLE__)
.macro _makesym name, base, len
.set \name, cake_main+\base
.endm
# define makesym(name,base,len) _makesym name, base, len
#elif defined(__WIN32)
.macro _makesym name, base, len
.set \name, cake_main+\base
.endm
# define makesym(name,base,len) _makesym name, base, len
#else
.macro _makesym name, base, len
.local \name
.set \name, cake_main+\base
.size \name, \len
.type \name, function
.endm
# define makesym(name,base,len) _makesym name, base, len
#endif

#define DATA_BUFFER_SIZE    65536
#define CODE_BUFFER_SIZE  5242880

     .file        "cake.S"

     .data
     .p2align 3
cdecl(cml_heap): .quad 0
cdecl(cml_stack): .quad 0
cdecl(cml_stackend): .quad 0
ret_base: .quad 0
ret_stack: .quad 0
ret_stackend: .quad 0
can_enter: .quad 0
     .p2align 3
cake_bitmaps:
	.quad 4,8,8,8,2,2
     .globl cdecl(cake_bitmaps_buffer_begin)
cdecl(cake_bitmaps_buffer_begin):
#if defined(EVAL)
     .space DATA_BUFFER_SIZE
#endif
     .globl cdecl(cake_bitmaps_buffer_end)
cdecl(cake_bitmaps_buffer_end):

/* Start up code */

     .text
     .p2align 3
     .globl  cdecl(cml_main)
     .globl  cdecl(cml_heap)
     .globl  cdecl(cml_stack)
     .globl  cdecl(cml_stackend)
#ifndef __APPLE__
     .type   cml_main, function
#endif

.macro _ldrel reg sym
#ifdef __APPLE__
adrp \reg, \sym@PAGE
add  \reg, \reg, \sym@PAGEOFF
#else
adrp \reg, \sym
add  \reg, \reg, :lo12:\sym
#endif
.endm

cdecl(cml_main):
     _ldrel x0, cake_main            /* arg1: entry address */
     _ldrel x1, cdecl(cml_heap)      /* arg2: first address of heap */
     ldr    x1,[x1]
     _ldrel x2, cdecl(cml_stack)     /* arg3: first address of stack */
     ldr    x2,[x2]
     _ldrel x3, cdecl(cml_stackend)  /* arg4: first address past the stack */
     ldr    x3,[x3]
     b      cml_enter
     .ltorg

/* CakeML FFI interface (each block is 16 bytes long) */

     .p2align 4

cake_ffiseL4_SetMR:
     b     cdecl(ffiseL4_SetMR)
     .p2align 4

cake_ffiseL4_GetMR_timer:
     b     cdecl(ffiseL4_GetMR_timer)
     .p2align 4

cake_ffimicrokit_notify:
     b     cdecl(ffimicrokit_notify)
     .p2align 4

cake_ffimicrokit_deferred_irq_ack:
     b     cdecl(ffimicrokit_deferred_irq_ack)
     .p2align 4

cake_clear:
     b   cdecl(cml_exit)
     .p2align 4

cake_exit:
     b   cml_return
     .p2align 4

cake_main:

/* Generated machine code follows */

	.byte 0x7E,0x00,0x03,0xAA,0xDE,0x03,0x01,0xCB,0xDE,0xFF,0x44,0xD3,0xDE,0xF3,0x7D,0xD3
	.byte 0xDE,0x03,0x01,0x8B,0x05,0xFF,0x80,0xD2,0x21,0x00,0x05,0x8B,0x63,0x00,0x05,0xCB
	.byte 0x5F,0x00,0x01,0xEB,0xA3,0x00,0x00,0x54,0x7F,0x00,0x02,0xEB,0x42,0x00,0x00,0x54
	.byte 0xC2,0x03,0x1E,0xAA,0x02,0x00,0x00,0x14,0xC2,0x03,0x1E,0xAA,0x1E,0xFF,0x80,0xD2
	.byte 0x21,0x00,0x1E,0xCB,0x63,0x00,0x1E,0x8B,0x5E,0x00,0x02,0xAA,0xDE,0x03,0x01,0xCB
	.byte 0xE5,0xD3,0x7D,0xB2,0xBF,0x00,0x1E,0xEB,0x62,0x00,0x00,0x54,0x22,0x00,0x01,0xAA
	.byte 0x42,0x00,0x05,0x8B,0x42,0x00,0x01,0xCB,0x42,0xFC,0x44,0xD3,0x42,0xEC,0x7C,0xD3
	.byte 0x42,0x00,0x01,0x8B,0x45,0x00,0x02,0xAA,0xA5,0x00,0x01,0xCB,0xA5,0xFC,0x41,0xD3
	.byte 0x3C,0x00,0x01,0xAA,0x21,0x00,0x05,0x8B,0x79,0x00,0x03,0xAA,0x5B,0x00,0x02,0xAA
	.byte 0x82,0x03,0x40,0xF9,0x42,0xFC,0x43,0xD3,0x9E,0x03,0x1C,0xAA,0xDE,0x23,0x00,0x91
	.byte 0xC3,0x03,0x40,0xF9,0xDE,0x23,0x00,0x91,0xC6,0x03,0x40,0xF9,0xDE,0x23,0x00,0x91
	.byte 0xC7,0x03,0x40,0xF9,0xDE,0x23,0x00,0x91,0xC0,0x03,0x40,0xF9,0x1E,0x01,0x80,0xD2
	.byte 0x39,0x03,0x1E,0xCB,0x1E,0x00,0x80,0xD2,0x3E,0x03,0x00,0xF9,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x66,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x63,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x60,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x67,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x62,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x7C,0x03,0x00,0xF9
	.byte 0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x1E,0x00,0x80,0xD2,0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x1E,0x00,0x80,0xD2
	.byte 0x7E,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x61,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x61,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x65,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x61,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91,0x7C,0x03,0x00,0xF9,0x7B,0x23,0x00,0x91
	.byte 0x5E,0x00,0x00,0x10,0x0D,0x01,0x00,0x14,0x00,0x00,0x80,0xD2,0x41,0xFF,0xFF,0x17
	.byte 0x40,0x00,0x80,0xD2,0x3F,0xFF,0xFF,0x17,0x60,0x03,0x1D,0xF8,0x7E,0x83,0x1F,0xF8
	.byte 0x00,0x00,0x80,0xD2,0x01,0x00,0x00,0xAA,0x62,0x03,0x5E,0xF8,0x03,0x00,0x00,0xAA
	.byte 0x65,0x03,0x5C,0xF8,0x06,0x00,0x00,0xAA,0x08,0x00,0x00,0xAA,0xBF,0x00,0x40,0xF2
	.byte 0x00,0x05,0x00,0x54,0xBE,0x00,0x05,0xAA,0x80,0x03,0x1C,0xAA,0xDE,0xFF,0x4C,0xD3
	.byte 0xDE,0xF3,0x7D,0xD3,0xDE,0x03,0x00,0x8B,0xC0,0x03,0x40,0xF9,0x1F,0x04,0x40,0xF2
	.byte 0x60,0x03,0x00,0x54,0x00,0xFC,0x60,0xD3,0x00,0x04,0x00,0x91,0x06,0x00,0x00,0xAA
	.byte 0xC1,0x03,0x1E,0xAA,0x1E,0x00,0x00,0xAA,0xDF,0x03,0x00,0xF1,0xE0,0x00,0x00,0x54
	.byte 0x20,0x00,0x40,0xF9,0x21,0x20,0x00,0x91,0xDE,0x07,0x00,0xD1,0x40,0x00,0x00,0xF9
	.byte 0x42,0x20,0x00,0x91,0xF9,0xFF,0xFF,0x17,0xDE,0x00,0x06,0xAA,0xDE,0xF3,0x7D,0xD3
	.byte 0x21,0x00,0x1E,0xCB,0x7E,0x00,0x03,0xAA,0xDE,0xF7,0x7E,0xD3,0x3E,0x00,0x00,0xF9
	.byte 0x60,0x00,0x03,0xAA,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3,0x00,0xCC,0x74,0xD3
	.byte 0xA5,0x00,0x00,0xAA,0x63,0x00,0x06,0x8B,0x06,0x00,0x00,0x14,0x00,0xFC,0x42,0xD3
	.byte 0x00,0xCC,0x74,0xD3,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3,0xA5,0x00,0x00,0xAA
	.byte 0x65,0x03,0x1C,0xF8,0xA7,0x00,0x05,0xAA,0xE7,0xFC,0x4C,0xD3,0xE7,0xF0,0x7D,0xD3
	.byte 0x69,0x03,0x5E,0xF8,0xE7,0x00,0x09,0x8B,0x67,0x83,0x1B,0xF8,0x07,0x00,0x80,0xD2
	.byte 0x09,0x01,0x08,0xAA,0x29,0x01,0x19,0x8B,0x29,0x01,0x40,0xF9,0xE8,0x00,0x07,0xAA
	.byte 0x3F,0x01,0x09,0xEA,0xC0,0x09,0x00,0x54,0x3E,0x01,0x09,0xAA,0x29,0x05,0x00,0xD1
	.byte 0x08,0x21,0x00,0x91,0xDF,0x03,0x1E,0xEA,0xA0,0x08,0x00,0x54,0x67,0x83,0x5A,0xF8
	.byte 0xE7,0x00,0x09,0x8B,0xE7,0xF0,0x7D,0xD3,0xE7,0x00,0x40,0xF9,0xFF,0x08,0x00,0xF1
	.byte 0x03,0x07,0x00,0x54,0xFF,0x00,0x40,0xF2,0x60,0x06,0x00,0x54,0x05,0x01,0x08,0xAA
	.byte 0xA5,0x00,0x19,0x8B,0xA5,0x00,0x40,0xF9,0xE7,0xFC,0x41,0xD3,0xBF,0x00,0x40,0xF2
	.byte 0x00,0x05,0x00,0x54,0xBE,0x00,0x05,0xAA,0x80,0x03,0x1C,0xAA,0xDE,0xFF,0x4C,0xD3
	.byte 0xDE,0xF3,0x7D,0xD3,0xDE,0x03,0x00,0x8B,0xC0,0x03,0x40,0xF9,0x1F,0x04,0x40,0xF2
	.byte 0x60,0x03,0x00,0x54,0x00,0xFC,0x60,0xD3,0x00,0x04,0x00,0x91,0x06,0x00,0x00,0xAA
	.byte 0xC1,0x03,0x1E,0xAA,0x1E,0x00,0x00,0xAA,0xDF,0x03,0x00,0xF1,0xE0,0x00,0x00,0x54
	.byte 0x20,0x00,0x40,0xF9,0x21,0x20,0x00,0x91,0xDE,0x07,0x00,0xD1,0x40,0x00,0x00,0xF9
	.byte 0x42,0x20,0x00,0x91,0xF9,0xFF,0xFF,0x17,0xDE,0x00,0x06,0xAA,0xDE,0xF3,0x7D,0xD3
	.byte 0x21,0x00,0x1E,0xCB,0x7E,0x00,0x03,0xAA,0xDE,0xF7,0x7E,0xD3,0x3E,0x00,0x00,0xF9
	.byte 0x60,0x00,0x03,0xAA,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3,0x00,0xCC,0x74,0xD3
	.byte 0xA5,0x00,0x00,0xAA,0x63,0x00,0x06,0x8B,0x06,0x00,0x00,0x14,0x00,0xFC,0x42,0xD3
	.byte 0x00,0xCC,0x74,0xD3,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3,0xA5,0x00,0x00,0xAA
	.byte 0x39,0x03,0x08,0x8B,0x25,0x03,0x00,0xF9,0x39,0x03,0x08,0xCB,0x08,0x21,0x00,0x91
	.byte 0x03,0x00,0x00,0x14,0xE7,0xFC,0x41,0xD3,0x08,0x21,0x00,0x91,0xC8,0xFF,0xFF,0x17
	.byte 0x7E,0x83,0x5A,0xF8,0xDE,0x03,0x09,0x8B,0xDE,0xF3,0x7D,0xD3,0xDE,0x03,0x40,0xF9
	.byte 0x29,0x05,0x00,0x91,0xDE,0xFF,0x7F,0xD3,0xBB,0xFF,0xFF,0x17,0x09,0x01,0x08,0xAA
	.byte 0x29,0x01,0x19,0x8B,0x29,0x01,0x40,0xF9,0xB2,0xFF,0xFF,0x17,0x68,0x03,0x5E,0xF8
	.byte 0x5F,0x00,0x08,0xEB,0x80,0x07,0x00,0x54,0x07,0x01,0x40,0xF9,0xFF,0x00,0x7E,0xF2
	.byte 0xC0,0x00,0x00,0x54,0xE7,0xFC,0x60,0xD3,0xE7,0x04,0x00,0x91,0xE7,0xF0,0x7D,0xD3
	.byte 0x08,0x01,0x07,0x8B,0x33,0x00,0x00,0x14,0xE7,0xFC,0x60,0xD3,0x08,0x21,0x00,0x91
	.byte 0xFF,0x00,0x00,0xF1,0xE0,0x05,0x00,0x54,0x05,0x01,0x40,0xF9,0xE7,0x04,0x00,0xD1
	.byte 0xBF,0x00,0x40,0xF2,0x00,0x05,0x00,0x54,0xBE,0x00,0x05,0xAA,0x80,0x03,0x1C,0xAA
	.byte 0xDE,0xFF,0x4C,0xD3,0xDE,0xF3,0x7D,0xD3,0xDE,0x03,0x00,0x8B,0xC0,0x03,0x40,0xF9
	.byte 0x1F,0x04,0x40,0xF2,0x60,0x03,0x00,0x54,0x00,0xFC,0x60,0xD3,0x00,0x04,0x00,0x91
	.byte 0x06,0x00,0x00,0xAA,0xC1,0x03,0x1E,0xAA,0x1E,0x00,0x00,0xAA,0xDF,0x03,0x00,0xF1
	.byte 0xE0,0x00,0x00,0x54,0x20,0x00,0x40,0xF9,0x21,0x20,0x00,0x91,0xDE,0x07,0x00,0xD1
	.byte 0x40,0x00,0x00,0xF9,0x42,0x20,0x00,0x91,0xF9,0xFF,0xFF,0x17,0xDE,0x00,0x06,0xAA
	.byte 0xDE,0xF3,0x7D,0xD3,0x21,0x00,0x1E,0xCB,0x7E,0x00,0x03,0xAA,0xDE,0xF7,0x7E,0xD3
	.byte 0x3E,0x00,0x00,0xF9,0x60,0x00,0x03,0xAA,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3
	.byte 0x00,0xCC,0x74,0xD3,0xA5,0x00,0x00,0xAA,0x63,0x00,0x06,0x8B,0x06,0x00,0x00,0x14
	.byte 0x00,0xFC,0x42,0xD3,0x00,0xCC,0x74,0xD3,0xA5,0x20,0x49,0xD3,0xA5,0xFC,0x77,0xD3
	.byte 0xA5,0x00,0x00,0xAA,0x05,0x01,0x00,0xF9,0x08,0x21,0x00,0x91,0xD1,0xFF,0xFF,0x17
	.byte 0xC4,0xFF,0xFF,0x17,0x9E,0x03,0x1C,0xAA,0x60,0x03,0x5E,0xF8,0x61,0x83,0x5E,0xF8
	.byte 0x21,0x00,0x00,0x8B,0x1C,0x00,0x00,0xAA,0x7E,0x03,0x1E,0xF8,0x7E,0x83,0x5F,0xF8
	.byte 0x68,0x83,0x1F,0xF8,0x61,0x03,0x1F,0xF8,0x61,0x83,0x1D,0xF8,0x60,0x03,0x5D,0xF8
	.byte 0x21,0x00,0x08,0xCB,0x3F,0x00,0x00,0xEB,0x62,0x00,0x00,0x54,0x20,0x00,0x80,0xD2
	.byte 0x64,0xFE,0xFF,0x17,0xC0,0x03,0x1F,0xD6,0x78,0x83,0x5C,0xF8,0x18,0xF3,0x7D,0xD3
	.byte 0x79,0x03,0x1B,0xAA,0x39,0x03,0x18,0x8B,0x38,0x0B,0x40,0xF9,0x78,0x83,0x1C,0xF8
	.byte 0x38,0x07,0x40,0xF9,0x39,0x63,0x00,0x91,0x00,0x03,0x1F,0xD6,0x7D,0x83,0x5A,0xF8
	.byte 0xBD,0x03,0x00,0x8B,0xBD,0xF3,0x7D,0xD3,0xA0,0x03,0x40,0xF9,0xBD,0x23,0x00,0x91
	.byte 0x1F,0x00,0x00,0xF1,0xEA,0x01,0x00,0x54,0x1F,0x04,0x00,0xF1,0x40,0x01,0x00,0x54
	.byte 0xB8,0x03,0x40,0xF9,0xBD,0x23,0x00,0x91,0x1F,0x00,0x40,0xF2,0x40,0x00,0x00,0x54
	.byte 0x18,0x03,0x02,0x8B,0x00,0xFC,0x41,0xD3,0x38,0x00,0x00,0xF9,0x21,0x20,0x00,0x91
	.byte 0xF6,0xFF,0xFF,0x17,0xA0,0x03,0x40,0xF9,0xBD,0x23,0x00,0x91,0xF1,0xFF,0xFF,0x17
	.byte 0x1F,0x04,0x00,0xF1,0x40,0x01,0x00,0x54,0xB8,0x03,0x40,0xF9,0xBD,0x23,0x00,0x91
	.byte 0x1F,0x00,0x40,0xF2,0x40,0x00,0x00,0x54,0x18,0x03,0x02,0x8B,0x00,0xFC,0x41,0xD3
	.byte 0x38,0x00,0x00,0xF9,0x21,0x20,0x00,0x91,0xF6,0xFF,0xFF,0x17,0x18,0x00,0x00,0xAA
	.byte 0x1D,0x00,0x00,0xAA,0xC0,0x03,0x1F,0xD6,0x01,0x00,0x00,0x14,0x00,0x00,0x80,0xD2
	.byte 0xC0,0x03,0x1F,0xD6,0x39,0x83,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0x2F,0xFE,0xFF,0x17,0x21,0xFC,0x4C,0x93,0x02,0x00,0x80,0xD2
	.byte 0x3F,0x00,0x02,0xEB,0x81,0x05,0x00,0x54,0x3E,0x0F,0x00,0xF9,0x58,0x00,0x80,0xD2
	.byte 0x38,0x03,0x00,0xF9,0x39,0x63,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0x23,0xFE,0xFF,0x17,0x38,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9
	.byte 0x98,0x03,0x00,0x10,0x38,0x07,0x00,0xF9,0x78,0x83,0x5C,0xF8,0x38,0x0B,0x00,0xF9
	.byte 0x38,0x03,0x19,0xAA,0x18,0x03,0x1B,0xCB,0x18,0xFF,0x43,0xD3,0x78,0x83,0x1C,0xF8
	.byte 0x5E,0x00,0x00,0x10,0x69,0x00,0x00,0x14,0x38,0x0B,0x40,0xF9,0x78,0x83,0x1C,0xF8
	.byte 0x39,0x63,0x00,0x91,0x01,0x7D,0x80,0xD2,0x1E,0x00,0x00,0xAA,0xC2,0x7F,0xC1,0x9B
	.byte 0xDE,0x7F,0x01,0x9B,0x00,0x00,0x80,0xD2,0x01,0x00,0x80,0xD2,0x02,0x00,0x80,0xD2
	.byte 0xC3,0x03,0x1E,0xAA,0x5E,0x00,0x00,0x10,0xF6,0xFD,0xFF,0x17,0x21,0x0F,0x40,0xF9
	.byte 0x20,0x00,0x80,0xD2,0x39,0x83,0x00,0x91,0x20,0x00,0x1F,0xD6,0x02,0x00,0x00,0x14
	.byte 0xA2,0xFF,0xFF,0x17,0x3E,0x0B,0x00,0xF9,0x18,0x00,0x80,0xD2,0x38,0x07,0x00,0xF9
	.byte 0x21,0x07,0x40,0xF9,0x20,0x07,0x00,0xF9,0x3E,0x0B,0x00,0xF9,0x3E,0x00,0x80,0xD2
	.byte 0x3F,0x00,0x1E,0xEB,0x21,0x09,0x00,0x54,0x00,0x00,0x80,0xD2,0x01,0x00,0x00,0xAA
	.byte 0x02,0x00,0x00,0xAA,0x03,0x00,0x00,0xAA,0x5E,0x00,0x00,0x10,0xE5,0xFD,0xFF,0x17
	.byte 0x9E,0x03,0x1C,0xAA,0xDE,0x0F,0x40,0xF9,0xDE,0xFF,0x4A,0x93,0x3E,0x0F,0x00,0xF9
	.byte 0x78,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9,0x39,0x63,0x00,0xD1,0x3F,0x03,0x1B,0xEB
	.byte 0x62,0x00,0x00,0x54,0x40,0x00,0x80,0xD2,0xEA,0xFD,0xFF,0x17,0x38,0x00,0x80,0xD2
	.byte 0x38,0x03,0x00,0xF9,0x98,0x06,0x00,0x10,0x38,0x07,0x00,0xF9,0x78,0x83,0x5C,0xF8
	.byte 0x38,0x0B,0x00,0xF9,0x38,0x03,0x19,0xAA,0x18,0x03,0x1B,0xCB,0x18,0xFF,0x43,0xD3
	.byte 0x78,0x83,0x1C,0xF8,0x5E,0x00,0x00,0x10,0x30,0x00,0x00,0x14,0x38,0x0B,0x40,0xF9
	.byte 0x78,0x83,0x1C,0xF8,0x39,0x63,0x00,0x91,0x3E,0x0F,0x40,0xF9,0x38,0x0B,0x40,0xF9
	.byte 0x38,0x0F,0x00,0xF9,0x21,0x07,0x40,0xF9,0xDE,0x03,0x00,0x8B,0x21,0x28,0x00,0x91
	.byte 0x21,0xF0,0x7D,0xD3,0x21,0x00,0x1C,0x8B,0x3E,0x00,0x00,0xF9,0x98,0x00,0x80,0xD2
	.byte 0x38,0x03,0x00,0xF9,0x39,0x63,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0xCB,0xFD,0xFF,0x17,0x38,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9
	.byte 0xF8,0x01,0x00,0x10,0x38,0x07,0x00,0xF9,0x78,0x83,0x5C,0xF8,0x38,0x0B,0x00,0xF9
	.byte 0x38,0x03,0x19,0xAA,0x18,0x03,0x1B,0xCB,0x18,0xFF,0x43,0xD3,0x78,0x83,0x1C,0xF8
	.byte 0x5E,0x00,0x00,0x10,0x1F,0x00,0x00,0x14,0x38,0x0B,0x40,0xF9,0x78,0x83,0x1C,0xF8
	.byte 0x39,0x63,0x00,0x91,0x21,0x0F,0x40,0xF9,0x03,0x00,0x00,0x14,0x21,0x0F,0x40,0xF9
	.byte 0x56,0xFF,0xFF,0x17,0x00,0x00,0x80,0xD2,0x39,0x83,0x00,0x91,0x20,0x00,0x1F,0xD6
	.byte 0x02,0x00,0x00,0x14,0x51,0xFF,0xFF,0x17,0x3E,0x0B,0x40,0xF9,0x00,0x00,0x80,0xD2
	.byte 0x39,0x83,0x00,0x91,0xC0,0x03,0x1F,0xD6,0x80,0x03,0x1C,0xAA,0x00,0x04,0x40,0xF9
	.byte 0x01,0x30,0x01,0x91,0x02,0x20,0x01,0x91,0x23,0x00,0x40,0xB9,0x40,0x00,0x40,0xB9
	.byte 0x21,0x00,0x40,0xB9,0x3F,0x00,0x03,0xEB,0x41,0x00,0x00,0x54,0x02,0x00,0x00,0x14
	.byte 0x40,0x00,0x40,0xB9,0x21,0x7C,0x60,0xD3,0x00,0x00,0x01,0xAA,0xC0,0x03,0x1F,0xD6
	.byte 0x01,0x00,0x80,0xD2,0x3D,0x00,0x01,0xAA,0x01,0x00,0x00,0xAA,0xA0,0x03,0x1D,0xAA
	.byte 0x01,0x00,0x00,0x14,0x39,0xA3,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0x97,0xFD,0xFF,0x17,0xC2,0x00,0x80,0xD2,0x1F,0x00,0x02,0xEB
	.byte 0x8A,0x03,0x00,0x54,0x02,0x28,0x00,0x91,0x42,0xF0,0x7D,0xD3,0x43,0x00,0x1C,0x8B
	.byte 0x65,0x00,0x40,0xF9,0x22,0x00,0x01,0xAA,0x5F,0x00,0x05,0xEB,0x42,0x00,0x00,0x54
	.byte 0x11,0x00,0x00,0x14,0x01,0x00,0x00,0xAA,0x00,0x00,0x80,0xD2,0x22,0x0F,0x00,0xF9
	.byte 0x02,0x00,0x00,0xAA,0x23,0x07,0x00,0xF9,0x03,0x00,0x00,0xAA,0x3E,0x13,0x00,0xF9
	.byte 0x21,0x0B,0x00,0xF9,0x5E,0x00,0x00,0x10,0x76,0xFD,0xFF,0x17,0x3E,0x13,0x40,0xF9
	.byte 0x22,0x0F,0x40,0xF9,0x20,0x0B,0x40,0xF9,0x21,0x07,0x40,0xF9,0x03,0x00,0x80,0x92
	.byte 0x23,0x00,0x00,0xF9,0x00,0x04,0x00,0x91,0x41,0x00,0x02,0xAA,0xE3,0xFF,0xFF,0x17
	.byte 0x20,0x00,0x01,0xAA,0x39,0xA3,0x00,0x91,0x01,0x00,0x00,0x14,0x02,0x00,0x80,0x92
	.byte 0x01,0x00,0x80,0xD2,0x3D,0x00,0x01,0xAA,0x01,0x00,0x00,0xAA,0xA0,0x03,0x1D,0xAA
	.byte 0x01,0x00,0x00,0x14,0xC3,0x00,0x80,0xD2,0x1F,0x00,0x03,0xEB,0xCA,0x01,0x00,0x54
	.byte 0x03,0x28,0x00,0x91,0x63,0xF0,0x7D,0xD3,0x63,0x00,0x1C,0x8B,0x63,0x00,0x40,0xF9
	.byte 0x5D,0x00,0x02,0xAA,0x62,0x00,0x03,0xAA,0xA3,0x03,0x1D,0xAA,0x5F,0x00,0x03,0xEB
	.byte 0x63,0x00,0x00,0x54,0x62,0x00,0x03,0xAA,0x01,0x00,0x00,0x14,0x00,0x04,0x00,0x91
	.byte 0xF1,0xFF,0xFF,0x17,0x20,0x00,0x01,0xAA,0x41,0x00,0x02,0xAA,0x01,0x00,0x00,0x14
	.byte 0x02,0x00,0x80,0x92,0x3F,0x00,0x02,0xEB,0x41,0x00,0x00,0x54,0x10,0x00,0x00,0x14
	.byte 0x82,0x03,0x1C,0xAA,0x42,0x04,0x40,0xF9,0x43,0x00,0x40,0xB9,0xE5,0xFF,0x9D,0xF2
	.byte 0xE5,0xFF,0xBF,0xF2,0x05,0x00,0xC0,0xF2,0x05,0x00,0xE0,0xF2,0x63,0x00,0x05,0x8A
	.byte 0x43,0x00,0x00,0xB9,0x43,0x10,0x00,0x91,0x20,0x00,0x00,0xCB,0x60,0x00,0x00,0xB9
	.byte 0x40,0x00,0x40,0xB9,0x00,0x00,0x70,0xB2,0x40,0x00,0x00,0xB9,0x00,0x00,0x80,0xD2
	.byte 0xC0,0x03,0x1F,0xD6,0x39,0x43,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0x43,0xFD,0xFF,0x17,0x81,0x03,0x1C,0xAA,0x22,0x00,0x40,0xF9
	.byte 0x01,0x00,0x00,0xAA,0x3F,0x00,0x02,0xEB,0x80,0x00,0x00,0x54,0x00,0x00,0x80,0xD2
	.byte 0x39,0x43,0x00,0x91,0xC0,0x03,0x1F,0xD6,0x00,0x00,0x80,0xD2,0x02,0x00,0x00,0xAA
	.byte 0x03,0x00,0x00,0xAA,0x3E,0x07,0x00,0xF9,0x5E,0x00,0x00,0x10,0x2D,0xFD,0xFF,0x17
	.byte 0x9E,0x03,0x1C,0xAA,0xC0,0x07,0x40,0xF9,0x1E,0x00,0x40,0xB9,0xE1,0xFF,0x9F,0xF2
	.byte 0xC1,0xFF,0xBF,0xF2,0x01,0x00,0xC0,0xF2,0x01,0x00,0xE0,0xF2,0xDE,0x03,0x01,0x8A
	.byte 0x1E,0x00,0x00,0xB9,0xB8,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9,0x39,0x63,0x00,0xD1
	.byte 0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54,0x40,0x00,0x80,0xD2,0x25,0xFD,0xFF,0x17
	.byte 0x38,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9,0x78,0x05,0x00,0x10,0x38,0x07,0x00,0xF9
	.byte 0x78,0x83,0x5C,0xF8,0x38,0x0B,0x00,0xF9,0x38,0x03,0x19,0xAA,0x18,0x03,0x1B,0xCB
	.byte 0x18,0xFF,0x43,0xD3,0x78,0x83,0x1C,0xF8,0x5E,0x00,0x00,0x10,0x6B,0xFF,0xFF,0x17
	.byte 0x38,0x0B,0x40,0xF9,0x78,0x83,0x1C,0xF8,0x39,0x63,0x00,0x91,0xD8,0x00,0x80,0xD2
	.byte 0x38,0x03,0x00,0xF9,0x39,0x63,0x00,0xD1,0x3F,0x03,0x1B,0xEB,0x62,0x00,0x00,0x54
	.byte 0x40,0x00,0x80,0xD2,0x0F,0xFD,0xFF,0x17,0x38,0x00,0x80,0xD2,0x38,0x03,0x00,0xF9
	.byte 0xF8,0x01,0x00,0x10,0x38,0x07,0x00,0xF9,0x78,0x83,0x5C,0xF8,0x38,0x0B,0x00,0xF9
	.byte 0x38,0x03,0x19,0xAA,0x18,0x03,0x1B,0xCB,0x18,0xFF,0x43,0xD3,0x78,0x83,0x1C,0xF8
	.byte 0x5E,0x00,0x00,0x10,0x63,0xFF,0xFF,0x17,0x38,0x0B,0x40,0xF9,0x78,0x83,0x1C,0xF8
	.byte 0x39,0x63,0x00,0x91,0x3E,0x07,0x40,0xF9,0x03,0x00,0x00,0x14,0x3E,0x07,0x40,0xF9
	.byte 0x9A,0xFE,0xFF,0x17,0x00,0x00,0x80,0xD2,0x39,0x43,0x00,0x91,0xC0,0x03,0x1F,0xD6
	.byte 0x02,0x00,0x00,0x14,0x95,0xFE,0xFF,0x17
     .globl cdecl(cake_codebuffer_begin)
cdecl(cake_codebuffer_begin):
#if defined(EVAL)
     .space CODE_BUFFER_SIZE
#endif
     .p2align 12
     .globl cdecl(cake_codebuffer_end)
cdecl(cake_codebuffer_end):
     .space 4096
    makesym(cml__Init_0, 0, 744)
    makesym(cml__Halt0_1, 744, 8)
    makesym(cml__Halt2_2, 752, 8)
    makesym(cml__GC_3, 760, 880)
    makesym(cml__Raise_4, 1640, 36)
    makesym(cml__StoreConsts_5, 1676, 140)
    makesym(cml_generated_main_6, 1816, 4)
    makesym(cml_main_7, 1820, 8)
    makesym(cml_protected_8, 1828, 532)
    makesym(cml_get_ticks_9, 2360, 56)
    makesym(cml_process_timeouts_10, 2416, 20)
    makesym(cml_NOTFOUND_11, 2436, 152)
    makesym(cml_NOTFOUND_12, 2588, 24)
    makesym(cml_NOTFOUND_13, 2612, 76)
    makesym(cml_NOTFOUND_14, 2688, 84)
    makesym(cml_notified_15, 2772, 324)


cml_enter:
     str    x30, [sp, #-32]!
     str    x28, [sp, #-32]!
     str    x27, [sp, #-32]!
     str    x25, [sp, #-32]!
     b      cake_main
     .p2align 4


cake_enter:
     str    x30, [sp, #-32]!
     str    x28, [sp, #-32]!
     str    x27, [sp, #-32]!
     str    x25, [sp, #-32]!
     _ldrel x9, can_enter
     ldr    x11, [x9]
     cbz    x11, cake_err3
     str    xzr, [x9]
     _ldrel x9, ret_base
     ldr    x28, [x9]
     _ldrel x9, ret_stack
     ldr    x25, [x9]
     _ldrel x9, ret_stackend
     ldr    x27, [x9]
     _ldrel x30, cake_return
     br     x10
     .p2align 4


cml_return:
     _ldrel x9, ret_base
     str    x28, [x9]
     _ldrel x9, ret_stack
     str    x25, [x9]
     _ldrel x9, ret_stackend
     str    x27, [x9]

cake_return:
     _ldrel x9, can_enter
     mov    x11, #1
     str    x11, [x9]
     mov    x8, x0
     ldr    x25, [sp], #32
     ldr    x27, [sp], #32
     ldr    x28, [sp], #32
     ldr    x30, [sp], #32
     ret
     .p2align 4


cake_err3:
     mov    x0, #3
     b      cdecl(cml_err)
     .p2align 4


    .globl cdecl(protected)
#ifndef __APPLE__
     .type   protected, function
#endif
cdecl(protected):
     _ldrel x10, protected_jmp
     b      cake_enter
protected_jmp:
     b      cml_protected_8

    .globl cdecl(notified)
#ifndef __APPLE__
     .type   notified, function
#endif
cdecl(notified):
     _ldrel x10, notified_jmp
     b      cake_enter
notified_jmp:
     b      cml_notified_15
